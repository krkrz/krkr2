<?xml version="1.0" encoding="Shift_JIS" ?>
<doc>
<title>画像フォーマットコンバータ</title>

<para>
<ptitle>画像フォーマットコンバータについて</ptitle>
　画像フォーマットコンバータ ( tools フォルダにある krkrtpc.exe ) は、吉里吉里の画像の相互変換を行うためのツールです。<r/>
　様々な画像の用意に使えます。<r/>
<r/>
　入力ファイルフォーマットとしては BMP, PNG, JPEG, PSD、出力ファイルフォーマットとしては BMP, PNG, TLG5, TLG6, JPEG のいずれかを選択できます。<r/>
　吉里吉里が用いるようなメイン/マスク分離形式の透過画像を読み込んだり、出力する事もできます。ここで用いている「マスク」という用語はαチャネルと同義です。<r/>
<r/>
　基本的には画像フォーマットを変換するだけなので、これで出力した画像は、他のソフトやツールにも使えると思います。<r/>
<r/>
　なお、このツールに限ったことではありませんが、<b>バックアップはお忘れなく！</b><r/>
</para>

<para>
<ptitle>入力画像フォーマット</ptitle>
　入力ファイルフォーマットとしては、以下の形式を用いることができます。<r/>
<r/>
<dl>
<dt>BMP</dt>
<dd>
　Windows 標準ビットマップ形式です。32 bit (bpp) 形式の BMP はαチャンネル付き BMP であると見なされます。<r/>
　その他の形式の BMP は、透過情報を持たない画像であると見なされます (後述のメイン/マスク分離形式に用いた場合を除く)。
</dd>

<dt>PNG</dt>
<dd>
　Portable Network Graphic 形式です。αチャネルや透過情報を持った PNG も読み込むことができます。
</dd>

<dt>PSD</dt>
<dd>
　Adobe Photoshop 3 以降で用いられる形式です。ただし、このツールで読み込める PSD には大きな以下の制限があります。<r/>
<r/>
<ul>
<li>カラーモードが RGB のもの以外を読み込めない</li>
<li>16bit/チャンネルのものを読み込めない</li>
<li>レイヤーのブレンドモードが「通常」以外のレイヤーを含むものを読み込めない</li>
<li>無圧縮とRLE圧縮のみ対応 ( Photoshop3.0 形式の場合は RLE圧縮のみ対応 )</li>
</ul>
<r/>
　大体のデータは読み込めますが、読み込めないデータもあります。<r/>
　カラーモードに RGB 以外(CMYKなど)を使用している場合は RGB に変換してください。16bit/チャンネルを使用している場合は 8bit/チャンネルに変換してください。「通常」以外のブレンドモードのレイヤを含む場合は、このツールに入力する前に「表示部分の統合」を行っておけば大丈夫です。<r/>
　この形式はメイン/マスク分離形式としては読み込むことができません。
</dd>

<dt>JPEG</dt>
<dd>
　フルカラーとグレイスケールの一般的な JPEG 形式を読み込めます。後述のメイン/マスク分離形式の入力として使うこともできます。</dd>

<dt>メイン/マスク分離形式</dt>
<dd>
　メイン/マスク分離形式は、メイン(色情報)の画像とマスク(透過情報)の画像が別々のファイルになっているものです。<r/>
　マスク画像は、メイン画像のファイル名の最後に _m のついたファイル名になります ( たとえば test.jpg に対して test_m.jpg )。<r/>
　メイン/マスク分離形式として有効な入力画像フォーマットは、それぞれ BMP, JPEG, PNG です。メインとマスクのフォーマットが異なっていてもかまいません。
</dd>
</dl>
<note>
　TLG5 や TLG6 形式は入力として用いることができません。ERI 形式は現時点では未対応です。
</note>
</para>

<para>
<ptitle>出力画像フォーマット</ptitle>
　出力画像フォーマットとしては以下の形式を用いることができます。<r/>
<r/>
<dl>
<dt>24bit/32bit BMP</dt>
<dd>
　24bit BMP はαチャンネルを持たない BMP です。<r/>
　32bit BMP はαチャネルを持った BMP で、一つのファイル内に メインとマスクを持っている BMP です。
</dd>

<dt>PNG</dt>
<dd>
　フルカラーの PNG、あるいはαチャンネル付きの PNG です。
</dd>

<dt>TLG5</dt>
<dd>
　フルカラーの TLG5、あるいはαチャンネル付きの TLG5 です。<r/>
<note>
　TLG5 形式は圧縮に結構時間がかかります。プログラムが止まってしまったように見えるかも知れません。
</note>
</dd>

<dt>TLG6</dt>
<dd>
　フルカラーの TLG6、あるいはαチャンネル付きの TLG6 です。<r/>
　version 2.21 beta 2 以前の吉里吉里２は TLG6 に対応していませんので注意が必要です。
<note>
　TLG6 形式は TLG5 形式と同じく、圧縮に結構時間がかかります。プログラムが止まってしまったように見えるかも知れません。
</note>
</dd>

<dt>メイン/マスク分離形式</dt>
<dd>
　透過情報を持った画像において、メイン/マスクを別々のファイルに記録する方式です。それぞれ、BMP, JPEG, PNG を選択できます。<r/>
　マスク画像は、メイン画像のファイル名の最後に _m のついたファイル名になります ( たとえば test.jpg に対して test_m.jpg )。<r/>
　メインとマスクを別々の画像形式にすることができますが、BMP と BMP 、PNG と PNG の組み合わせはほとんど意味がないので、上記の 32bit BMP か αチャネル付き PNG を選択した方が良いでしょう。<r/>
　どちらか、あるいは両方に JPEG を用いればファイルサイズは節約できますが、画質は悪くなります。<r/>
　メイン/マスク分離形式に TLG5 や TLG6 形式を指定することはできません。
</dd>
</dl>
</para>

<para>
<ptitle>画像フォーマットコンバータの使い方</ptitle>
<r/>
　変換は、変換したいファイルを画像フォーマットコンバータのウィンドウの上にドロップすることで行うことができます。複数のファイルをドロップする事もできます。<r/>
<r/>
　透過情報を持たない画像、透過情報を持った画像にそれぞれ別の形式を指定することができます。<r/>
<r/>
　変換終了後、各ファイルの変換が成功したか、エラーになったかを確認できるログが表示されますので確認してください。<r/>
<r/>
　以下は、画面の説明です。<r/>
<r/>
<img src="TPC.png"/><r/><r/>
　実行すると、上の画面が表示されます。<r/>
<r/>
<dl>
<dt>「オプションを表示」</dt>
<dd>
　チェックされている状態では、下の設定部分が表示されます。チェックをはずすと、ウィンドウは上部部分だけとなり、横に細長くなります。オプション設定が必要ない場合にウィンドウをコンパクトにすることができます。
</dd>

<dt>「透過情報を持たない画像の出力形式 - 24bit BMP」</dt>
<dd>
　透過情報を持たない画像の出力形式として 24bit BMP を選択します。
</dd>

<dt>「透過情報を持たない画像の出力形式 - PNG」</dt>
<dd>
　透過情報を持たない画像の出力形式として PNG を選択します。
</dd>

<dt>「透過情報を持たない画像の出力形式 - TLG5」</dt>
<dd>
　透過情報を持たない画像の出力形式として TLG5 を選択します。
</dd>

<dt>「透過情報を持たない画像の出力形式 - TLG6」</dt>
<dd>
　透過情報を持たない画像の出力形式として TLG6 を選択します。
</dd>

<dt>「透過情報を持たない画像の出力形式 - JPEG」</dt>
<dd>
　透過情報を持たない画像の出力形式として JPEG を選択します。
</dd>

<dt>「透過情報を持たない画像の出力形式 - JPEG オプション...」</dt>
<dd>
　透過情報を持たない画像の出力形式として JPEG を選択した場合の、JPEG の圧縮クオリティを選択します。
</dd>


<dt>「透過情報を持った画像の出力形式 - 32bit BMP (メイン+マスク)」</dt>
<dd>
　透過情報を持った画像の出力形式として 32bit BMP を選択します。
</dd>

<dt>「透過情報を持った画像の出力形式 - αチャネル付き PNG (メイン+マスク)」</dt>
<dd>
　透過情報を持った画像の出力形式として αチャネル付き PNG を選択します。
</dd>

<dt>「透過情報を持った画像の出力形式 - αチャネル付き TLG5 (メイン+マスク)」</dt>
<dd>
　透過情報を持った画像の出力形式として αチャネル付き TLG5 を選択します。
</dd>

<dt>「透過情報を持った画像の出力形式 - αチャネル付き TLG6 (メイン+マスク)」</dt>
<dd>
　透過情報を持った画像の出力形式として αチャネル付き TLG6 を選択します。
</dd>

<dt>「透過情報を持った画像の出力形式 - メイン/マスク分離形式」</dt>
<dd>
　透過情報を持った画像の出力形式としてメイン/マスク分離形式を指定します。メイン/マスクに何を用いるかを下で選択します。また、JPEG の場合、「JPEG オプション」ボタンをクリックすることによって、JPEG の圧縮クオリティを選択することができます。
</dd>

<dt>「透過情報を持った画像の出力形式 - 完全透明部分の色情報」</dt>
<dd>
　画像の完全に透明な部分の処理を指定します。<r/>
　通常、透過度(αチャンネル)付きの画像の場合、完全に透明な部分でも色の情報を持っています。その部分は完全に透明なので表示するときは単に無視されるのですが、画像の加工 ( JPEG等による圧縮も含む ) を行うときは無視されません。<r/>
　この完全に透明な部分の処理の方式を指定します。<r/>
<r/>
<dl>
<dt>除去</dt>
<dd>
　除去を指定すると、完全に透明な部分の色情報は除去されます ( 正確には真っ黒で塗りつぶされる )。<r/>
　通常はこの指定でOKです。
</dd>

<dt>そのまま</dt>
<dd>
　処理を行いません。元の画像そのままになります。<r/>
　完全透明部分にゴミがある場合、そのゴミまで圧縮することになるので圧縮率が悪くなります。
</dd>

<dt>合成</dt>
<dd>
　完全透明部分の色を、その周りにある不透明な部分の色から推測し、合成します。<r/>
　合成の強度を 1, 2, 3, 5, 8 pixel から選べます。ここでピクセル単位で指定された距離内にある不透明な部分のピクセルの色から、完全透明部分の色を合成します。値が大きいほど処理に時間がかかります。ここで指定した距離外にある完全透明な部分の色は除去されます。<r/>
　たとえば JPEG でメイン画像を圧縮する場合、JPEG の特性上、急激な色の変化がある場所ではモスキートノイズが発生します。これは前景画像の場合、もし「合成」処理をおこなわず、完全不透明部分と不透明部分の境界で急激な色の変化がある場合、その部分に発生しやすくなります。「合成」処理を行うと、完全透明部分の色を不透明部分の色から合成するため、色の変化の差を抑え、モスキートノイズの発生を抑えることができます。また、一般的な JPEG では 色の情報が隣のピクセルと混ざりますが、これも「合成」処理を行うことで、(合成しなかった場合の) 意図しない完全透明部分の色と不透明部分の色が混ざる事を抑えることができます。<r/>
　通常は「除去」を選んでください。完全に透明な部分には色の情報は必要ありません。また除去を行えば画像の圧縮後のファイルサイズも小さくすることができます。
</dd>
</dl>

</dd>

<dt>「出力フォルダ - 入力ファイルと同じフォルダ」</dt>
<dd>
　出力するファイルを、入力ファイルとおなじフォルダに出力するようにします。
</dd>

<dt>「出力フォルダ - 指定フォルダ」</dt>
<dd>
　出力ファイルを、下の入力欄に指定したフォルダに出力します。<r/>
　「参照 ...」ボタンをクリックすると、出力フォルダを選択するダイアログボックスを表示することができます。<r/>
　入力欄に相対フォルダを指定した場合は、入力ファイルのあるフォルダからの相対位置で指定することができます。
</dd>

<dt>「出力フォルダ - 同名のファイルがあった場合に上書きする」</dt>
<dd>
　このチェックボックスをチェックすると、同名のファイルがあった場合、上書きします。
</dd>

<dt>「エラーが発生しなかった場合はログを表示しない」</dt>
<dd>
　このチェックボックスをチェックすると、変換が終わって、変換中にエラーが発生しなかった場合は、ログを確認するためのウィンドウを表示しません。
</dd>

<dt>「閉じる」</dt>
<dd>
　このツールを終了します。
</dd>
</dl>
</para>


</doc>


